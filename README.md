# Сервис-шаблон для разработки с `speckit`

- Шаблон для подготовки требований к разработке с ИИ-агентом. 
- Генерирует требования с библиотекой `speckit`
- Структура проекта заточена под стандартную бэкенд-архитектуру `Controller > Service > CRUD > DB`
- Добавлены некоторые удобства, заточенные специально под `claude code`: предзаполнен файл `CLAUDE.md`, описаны некоторые скиллы.
- Сам `speckit` работает с любыми агентами (см. [доку](https://github.com/github/spec-kit)).
- Шаблон заточен под стек: `FastAPI`, `SQLAlchemy`, `Alembic`

## Важно
- Команды `speckit` лучше не пропускать. Фазы имплементации в `tasks.md` тоже. 
- Контекст каждого последующего md-файла для нейронки учитывает предыдущие, содержит зависимости. Нарушив порядок, получаем галлюцинирующий результат.
- Жрет много токенов, надо учитывать.

## Установка

### Зависимости
Можно установить с помощью любого пакетного менеджера, который работает с `pyproject.toml`. Рекомендуется `uv`.
```bash
uv sync
```

### speckit
Установка сборщика для требований для ИИ-агентов `speckit`.
```bash
uv tool install specify-cli --from git+https://github.com/github/spec-kit.git
```
Иницализация
```bash
specify init .
specify check
```

## Запуск
Проект содержит `Makefile` в корне для быстрого запуска ключевых функций сервиса и тестов. Подробнее команды смотреть в файле.

### Локальный запуск
```bash
uv run uvicorn app.main:app
```

### Локальный запуск с hot reload
```bash
uv run uvicorn app.main:app --reload
```

### Docker compose
```bash
docker compose up -d
```

## Авто-тесты
Обычный запуск с проверкой покрытия по `if-else` веткам
```bash
pytest --cov=app --cov-branch --cov-report=term-missing
```

## Разработка с помощью `speckit`

Подробная инструкция по вызову функций описана в `READE.md` директории `specs`.