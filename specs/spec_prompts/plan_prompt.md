# Plan

## 1. Архитектура проекта
Проект будет разделен на несколько слоев:

- **Controllers**: обработчики маршрутов FastAPI, которые отвечают за прием запросов и отправку ответов.
- **Services**: бизнес-логика, которая будет заниматься реализацией основных операций.
- **CRUD**: прямое взаимодействие с базой данных через SQLAlchemy.
- **Models**: описание сущностей, таблиц в базе данных.

## 2. База данных
Будет использоваться SQLAlchemy для работы с PostgreSQL. Сессия будет асинхронной для оптимизации работы с запросами.

- Настроим асинхронное подключение через `asyncpg`.
- Используем SQLAlchemy ORM для описания моделей данных.

## 3. API
- Основные маршруты будут включать создание, чтение, обновление и удаление данных (CRUD).
- Валидация входных и выходных данных будет выполняться с использованием Pydantic V2.
- Для авторизации и аутентификации будет настроен OAuth2 с JWT.

## 4. Логирование и обработка ошибок
Используем `loguru` для логирования.

- Логи будут записываться в файл и выводиться на консоль.
- Все ошибки будут обрабатываться централизованно через кастомный Exception Handler в FastAPI.

## 5. Тестирование
- Для тестирования будет использоваться `pytest`, с асинхронными тестами через `pytest-asyncio`.
- Покрытие будет включать тесты для API, взаимодействия с базой данных и бизнес-логики.
- Использование `pytest-cov` для генерации отчетов о покрытии.

## 6. CI/CD
Процесс CI/CD будет автоматизировать:
- Запуск тестов.
- Деплой на сервер с использованием Docker и GitHub Actions.

## 7. Конфигурация
- Все настройки будут загружаться через Pydantic Settings из файла `.env`.
- Для гибкости в разных окружениях будут использоваться разные конфигурации.

## 8. Авторизация и секреты
- Для авторизации использовать JWT из библиотеки `jose`
- Для хэширования паролей использовать алгоритм `bcrypt` и библиотеку хэширования `passlib[bcrypt]`